---
layout: default
title: Death Row
---
<h2>Various infographics about executed offenders in Texas since 1982.</h2>
<hr>
<h3>Racial Demographics Pie Chart</h3>
<p>A pie chart representation of the racial demographics of the executed criminals of Texas. Text color matched to respective color on pie chart.</p>
<div class="container">
<div id="race">
  <div style="float:left">
    <svg id="donut" width="350" height="370"></svg>
  </div>
  <div id="raceDescription" style="float:left;padding-top:100px">
  </div>

<script>

function sum(a,b) {
  return (a + b);
}

d3.csv("../data/deathrow/deathrow.csv", function(csv) {
  //racial demographics graph
  var races = ["Black", "White", "Hispanic","Other"];
  var colors = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728"];
  var raceMap = [];
  for (var i = 0; i < races.length; i++) {
    var raceObject = {}
    var executionsByRace = _.filter(csv, function(execution) { return (execution.race == races[i])});
    raceObject.race = races[i];
    raceObject.count = executionsByRace.length;
    raceObject.colorVal = colors[i];
    raceMap.push(raceObject);
  }
  console.log(raceMap);

  var totalCount = _.reduce([Number(raceMap[0].count),Number(raceMap[1].count),Number(raceMap[2].count),Number(raceMap[3].count)],sum);

  console.log(totalCount);

  var cScale = d3.scale.linear().domain([0,totalCount]).range([0,2*Math.PI]);
  var vis = d3.select('#donut');
  var description = d3.select('#raceDescription')

  description.selectAll("p")
    .data(raceMap)
    .enter().append("p")
    .text(function(d){return d.race + ": " + ((Math.round(Number(d.count)*100*100/totalCount))/100).toString() + "%, " + d.count + " executions";})
    .style("color", function(d){return d.colorVal;})
    .style("font-size","25px");

  console.log(cScale);

  var startPoint = 0;
  var arc=d3.svg.arc()
  .innerRadius(0)
  .outerRadius(150)
  .startAngle(function(d){
    console.log(startPoint)
    oldStartPoint = startPoint;
    startPoint += Number(d.count);
    return cScale(oldStartPoint);
  }).endAngle(function(){
    console.log(startPoint);
    return cScale(startPoint);
  });

  vis.selectAll("path")
  .data(raceMap)
  .enter()
  .append("path")
  .attr("d",arc)
  .style("fill",function(d){return d.colorVal;})
  .attr("transform","translate(150,200)");
  ///////
});
</script>

</div>
</div>
<hr>
